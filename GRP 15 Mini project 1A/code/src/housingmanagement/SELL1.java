/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */
package housingmanagement;
import java.io.*;
import java.io.File;
import java.io.FileInputStream;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.JOptionPane;

/**
 *
 * @author Rajesh
 */
public class SELL1 extends javax.swing.JFrame {

    /**
     * Creates new form Sell
     */
    public SELL1() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel2 = new javax.swing.JLabel();
        jTextField2 = new javax.swing.JTextField();
        jTextField1 = new javax.swing.JTextField();
        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        btnsell = new javax.swing.JButton();
        btnUpdate = new javax.swing.JButton();
        btnDelete = new javax.swing.JButton();
        comboState = new javax.swing.JComboBox<>();
        ComboCity = new javax.swing.JComboBox<>();
        ComboProperty = new javax.swing.JComboBox<>();
        ComboBhk = new javax.swing.JComboBox<>();
        edtPrice = new javax.swing.JTextField();
        btnchoosefile = new javax.swing.JButton();
        edtimage = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        jTextField3 = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jButton1 = new javax.swing.JButton();
        jLabel4 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jTextField2.setBackground(new java.awt.Color(204, 204, 204));
        jTextField2.setFont(new java.awt.Font("MV Boli", 0, 24)); // NOI18N
        jTextField2.setForeground(new java.awt.Color(204, 0, 51));
        jTextField2.setText("Are you a House Owner?");
        jTextField2.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        getContentPane().add(jTextField2, new org.netbeans.lib.awtextra.AbsoluteConstraints(310, 10, 320, 50));

        jTextField1.setBackground(new java.awt.Color(255, 153, 153));
        jTextField1.setFont(new java.awt.Font("MV Boli", 1, 15)); // NOI18N
        jTextField1.setForeground(new java.awt.Color(51, 0, 51));
        jTextField1.setText("Find the right Buyer \nby Listing your \nPROPERTY NOW....");
        jTextField1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jTextField1ActionPerformed(evt);
            }
        });
        getContentPane().add(jTextField1, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 70, 480, 60));

        jPanel1.setBackground(new java.awt.Color(102, 102, 102,80));
        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jLabel1.setText("jLabel1");
        jPanel1.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(42, 558, 37, -1));

        btnsell.setBackground(new java.awt.Color(212, 175, 55));
        btnsell.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnsell.setText("Post");
        btnsell.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnsellActionPerformed(evt);
            }
        });
        jPanel1.add(btnsell, new org.netbeans.lib.awtextra.AbsoluteConstraints(97, 410, -1, -1));

        btnUpdate.setBackground(new java.awt.Color(212, 175, 55));
        btnUpdate.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnUpdate.setText("Update");
        btnUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUpdateActionPerformed(evt);
            }
        });
        jPanel1.add(btnUpdate, new org.netbeans.lib.awtextra.AbsoluteConstraints(318, 410, -1, -1));

        btnDelete.setBackground(new java.awt.Color(212, 175, 55));
        btnDelete.setFont(new java.awt.Font("Segoe UI", 1, 12)); // NOI18N
        btnDelete.setText("Delete");
        btnDelete.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDeleteActionPerformed(evt);
            }
        });
        jPanel1.add(btnDelete, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 410, -1, -1));

        comboState.setBackground(new java.awt.Color(212, 175, 55));
        comboState.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        comboState.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Select State", "Goa", "Gujarat", "Karnataka", "Maharashtra", "West Bengal", " ", " " }));
        comboState.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboStateActionPerformed(evt);
            }
        });
        jPanel1.add(comboState, new org.netbeans.lib.awtextra.AbsoluteConstraints(318, 115, -1, -1));

        ComboCity.setBackground(new java.awt.Color(212, 175, 55));
        ComboCity.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        ComboCity.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Select City", "Mumbai", "Delhi", "Banglore", "Hyderabad", "Ahmedabad", "Chennai", "Kolkata", "Pune", "Jaipur", "Lucknow", "Kanpur", "Nagpur", "Thane", "Patna", "Navi Mumbai", " ", " " }));
        ComboCity.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ComboCityActionPerformed(evt);
            }
        });
        jPanel1.add(ComboCity, new org.netbeans.lib.awtextra.AbsoluteConstraints(318, 201, 141, -1));

        ComboProperty.setBackground(new java.awt.Color(212, 175, 55));
        ComboProperty.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        ComboProperty.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "Property Type", "Apartment", "Plot", "Villa", "Penthouse", " " }));
        ComboProperty.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ComboPropertyActionPerformed(evt);
            }
        });
        jPanel1.add(ComboProperty, new org.netbeans.lib.awtextra.AbsoluteConstraints(42, 42, -1, 27));

        ComboBhk.setBackground(new java.awt.Color(212, 175, 55));
        ComboBhk.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        ComboBhk.setModel(new javax.swing.DefaultComboBoxModel<>(new String[] { "BHK Type", "1RK", "1BHK", "2BHK", "3BHK", "3+BHK" }));
        ComboBhk.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                ComboBhkActionPerformed(evt);
            }
        });
        jPanel1.add(ComboBhk, new org.netbeans.lib.awtextra.AbsoluteConstraints(51, 115, -1, 27));

        edtPrice.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                edtPriceActionPerformed(evt);
            }
        });
        jPanel1.add(edtPrice, new org.netbeans.lib.awtextra.AbsoluteConstraints(318, 75, 134, -1));

        btnchoosefile.setBackground(new java.awt.Color(212, 175, 55));
        btnchoosefile.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        btnchoosefile.setText("Choose File");
        btnchoosefile.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnchoosefileActionPerformed(evt);
            }
        });
        jPanel1.add(btnchoosefile, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 198, -1, -1));

        edtimage.setText("Upload Property image here");
        edtimage.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(204, 153, 0)));
        jPanel1.add(edtimage, new org.netbeans.lib.awtextra.AbsoluteConstraints(530, 42, 294, 144));

        jTextArea1.setColumns(20);
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        jPanel1.add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(42, 289, 257, -1));

        jTextField3.setBackground(new java.awt.Color(212, 175, 55));
        jTextField3.setFont(new java.awt.Font("Segoe UI", 1, 14)); // NOI18N
        jTextField3.setText("Price");
        jPanel1.add(jTextField3, new org.netbeans.lib.awtextra.AbsoluteConstraints(318, 42, -1, -1));

        jLabel3.setBackground(new java.awt.Color(212, 175, 55));
        jLabel3.setFont(new java.awt.Font("Segoe UI", 1, 18)); // NOI18N
        jLabel3.setText("Address");
        jPanel1.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 250, 100, 30));

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 140, 830, 470));

        jButton1.setText("BACK");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(810, 20, -1, -1));
        getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 930, 600));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnsellActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnsellActionPerformed
        // TODO add your handling code here:
       
        try{
          
        Class.forName("com.mysql.jdbc.Driver");
         Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/seds","root","123456");
         String sql = "insert into sell(state,city,property,bhk,price,image) values(?,?,?,?,?,?)";//inserting data into table sell
         
         PreparedStatement pstm =con.prepareStatement(sql);
         FileInputStream im=new FileInputStream("C:\\Users\\rohan\\Pictures\\house.jpg");
         String state;
         state=comboState.getSelectedItem().toString();
         pstm.setString(1, state);
         
         String city;
         city=ComboCity.getSelectedItem().toString();
         pstm.setString(2, city);
         
         String property;
         property=ComboProperty.getSelectedItem().toString();
         pstm.setString(3, property);
         
         String bhk;
         bhk= ComboBhk.getSelectedItem().toString();
         pstm.setString(4, bhk);
        
         pstm.setInt(5,Integer.parseInt(edtPrice.getText()) );
         
         pstm.setBinaryStream(6,im,im.available());
         
                   pstm.executeUpdate();
         JOptionPane.showMessageDialog(null, "Property Posted Successfully ");
         con.close();     
        }
      catch( Exception e)
      {
           JOptionPane.showMessageDialog(null, e);

      }
    }//GEN-LAST:event_btnsellActionPerformed

    private void btnUpdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnUpdateActionPerformed
        // TODO add your handling code here:
        try{

       Class.forName("com.mysql.jdbc.Driver");
       Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/seds","root","123456");
       String sql="update sell set state=?,city=?,property=?,bhk=? where price =?";
       PreparedStatement pstm=con.prepareStatement(sql);
      
         
        String state;
         state=comboState.getSelectedItem().toString();
         pstm.setString(1, state);
       
         String city;
         city=ComboCity.getSelectedItem().toString();
         pstm.setString(2, city);
         
         String property;
         property=ComboProperty.getSelectedItem().toString();
         pstm.setString(3, property);
         
         String bhk;
         bhk= ComboBhk.getSelectedItem().toString();
         pstm.setString(4, bhk);
        
         pstm.setInt(5,Integer.parseInt(edtPrice.getText()) );
          pstm.executeUpdate();
          JOptionPane.showMessageDialog(null, "Property Updated Successfully");
       con.close();     
      }
      catch( Exception e)
      {
           JOptionPane.showMessageDialog(null, e);

      }
    }//GEN-LAST:event_btnUpdateActionPerformed

    private void btnDeleteActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnDeleteActionPerformed
        // TODO add your handling code here:
        try{

       Class.forName("com.mysql.jdbc.Driver");
     Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/seds","root","123456");
       String sql="delete from sell where State=?,City=?,Property Type=?,BHK Type=? where id=?";
       
       PreparedStatement pstm=con.prepareStatement(sql);
     
         
       String state;
         state=comboState.getSelectedItem().toString();
         pstm.setString(1, state);
         
         String city;
         city=ComboCity.getSelectedItem().toString();
         pstm.setString(2, city);
         
         String property;
         property=ComboProperty.getSelectedItem().toString();
         pstm.setString(3, property);
         
         String bhk;
         bhk= ComboBhk.getSelectedItem().toString();
         pstm.setString(4, bhk);
        
         pstm.setInt(5,Integer.parseInt(edtPrice.getText()) );
         pstm.executeUpdate();
         JOptionPane.showMessageDialog(null, "Property Deleted Successfully");
       con.close();     
      }
      catch( Exception e)
      {
           JOptionPane.showMessageDialog(null, e);

      }
    }//GEN-LAST:event_btnDeleteActionPerformed

    private void ComboCityActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ComboCityActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_ComboCityActionPerformed

    private void ComboPropertyActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ComboPropertyActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_ComboPropertyActionPerformed

    private void edtPriceActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_edtPriceActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_edtPriceActionPerformed

    private void jTextField1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jTextField1ActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jTextField1ActionPerformed

    private void btnchoosefileActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnchoosefileActionPerformed
        // TODO add your handling code here:
         JFileChooser fc=new JFileChooser();
        fc.showOpenDialog(this);
        File f=fc.getSelectedFile();
        String path=f.getAbsolutePath();
        edtimage.setIcon(new ImageIcon(path));
        try{
            
            FileInputStream fin=new FileInputStream(f);
            int len=(int)f.length();
            
            Class.forName("com.mysql.jdbc.Driver");
            Connection con=DriverManager.getConnection("jdbc:mysql://localhost/robo", "root", "miniproj1234");
            PreparedStatement ps=con.prepareStatement("insert into `Image` values(?)");
            ps.setBinaryStream(1, fin, len);
            int status=ps.executeUpdate();
            if(status>0)
            {
                jLabel2.setText("Successfully inserted in DB");
            }else{
                jLabel2.setText("Image not inserted!");
            }
        }catch(Exception e){System.out.println(e);
       }
    }//GEN-LAST:event_btnchoosefileActionPerformed

    private void comboStateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_comboStateActionPerformed
        // TODO add your handling code here:
        
        
        if(comboState.getSelectedItem().equals("Goa"))
        {
            ComboCity.removeAllItems();
             ComboCity.setSelectedItem(null);
            ComboCity.addItem("Panaji");
        }
        else
        if(comboState.getSelectedItem().equals("Gujarat"))
        {
             ComboCity.removeAllItems();
             ComboCity.setSelectedItem(null);
            ComboCity.addItem("Ahmedabad");
            ComboCity.addItem("Surat");
            ComboCity.addItem("Vadodra");
        }
        else
        if(comboState.getSelectedItem().equals("Karnataka"))
        {
             ComboCity.removeAllItems();
             ComboCity.setSelectedItem(null);
            ComboCity.addItem("Bengaluru");
        }
        else
        if(comboState.getSelectedItem().equals("Maharashtra"))
        {
             ComboCity.removeAllItems();
             ComboCity.setSelectedItem(null);
            ComboCity.addItem("Mumbai");
            ComboCity.addItem("Pune");
            ComboCity.addItem("Nagpur");
        }
        else
        if(comboState.getSelectedItem().equals("West Bengal"))
        {
             ComboCity.removeAllItems();
             ComboCity.setSelectedItem(null);
            ComboCity.addItem("Kolkata");
            ComboCity.addItem("Howrah");
 
        }
        
    }//GEN-LAST:event_comboStateActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO add your handling code here:
        HomePage1 hpage =new HomePage1();
                hpage.show();
    }//GEN-LAST:event_jButton1ActionPerformed

    private void ComboBhkActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_ComboBhkActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_ComboBhkActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(SELL1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(SELL1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(SELL1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(SELL1.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new SELL1().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JComboBox<String> ComboBhk;
    private javax.swing.JComboBox<String> ComboCity;
    private javax.swing.JComboBox<String> ComboProperty;
    private javax.swing.JButton btnDelete;
    private javax.swing.JButton btnUpdate;
    private javax.swing.JButton btnchoosefile;
    private javax.swing.JButton btnsell;
    private javax.swing.JComboBox<String> comboState;
    private javax.swing.JTextField edtPrice;
    private javax.swing.JLabel edtimage;
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JTextField jTextField1;
    private javax.swing.JTextField jTextField2;
    private javax.swing.JTextField jTextField3;
    // End of variables declaration//GEN-END:variables

    private static class FileInputSream {

        public FileInputSream() {
        }
    }
}
